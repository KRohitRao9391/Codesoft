<!doctype html>
<html>
<head><meta charset="utf-8"><title>Projects</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="style.css"></head>
<body>
  <header class="top"><div class="wrap"><h1>Project Manager</h1><nav><a href="index.html">Dashboard</a><a href="create-project.html">Create Project</a></nav></div></header>
  <main class="container">
    <h2>Projects</h2>
    <div id="list"></div>
  </main>
<script>
async function load(){
  const res = await fetch('/api/projects');
  const projects = await res.json();
  const el = document.getElementById('list');
  if(projects.length===0) el.innerHTML='<p>No projects yet.</p>';
  else{
    el.innerHTML = '';
    projects.forEach(p=>{
      const d = document.createElement('div'); d.className='card';
      d.innerHTML = '<h3>'+escape(p.title)+'</h3><p>'+escape(p.description||'')+'</p><p>Due: '+(p.dueDate||'â€”')+'</p><p><a href="project.html?id='+p.id+'">View</a></p>';
      el.appendChild(d);
    });
  }
}
function escape(s){ return String(s).replace(/[&<>"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }
load();
</script>
</body>
</html>
